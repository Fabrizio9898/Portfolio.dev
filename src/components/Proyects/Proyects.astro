---
import LinkButton from "../LinkButton/LinkButton.astro";
import Link from "../icons/Link.astro";
import GitHub from "../icons/Github.astro";
import { PROJECTS } from "../../data/proyects";
import LinkInline from "../icons/LinkInline.astro";
import Download from "../icons/Download.astro";
---

<div class="article-container flex flex-col gap-y-16">
  {
    PROJECTS.map(
      ({ data, image, title, description, tags, link, github, download }) => (
        <article class="flex flex-col space-x-0 space-y-8  md:flex-row md:space-x-8 md:space-y-0">
          <div class="w-full md:w-1/2">
            {Array.isArray(image) ? (
              // 1. SI ES UN ARRAY, RENDERIZA EL CARRUSEL
              <div
                class="slider 
              relative w-full  h-64 md:h-80 flex shadow-xl 
              rounded-xl overflow-x-auto 
              snap-x snap-mandatory scroll-smooth no-scrollbar  "
              >
                {image.map((imgSrc, index) => (
                  <div class="w-full h-full flex-shrink-0  snap-center">
                    <img
                      alt={`${title} - Imagen ${index + 1}`}
                      class="object-top w-full h-full "
                      loading="lazy"
                      src={imgSrc}
                    />
                  </div>
                ))}
              </div>
            ) : (
              // 2. SI ES UN STRING, RENDERIZA LA IMAGEN ÃšNICA (como antes)
              <div
                class="relative flex h-64 md:h-80 flex-col items-center col-span-6 row-span-5 gap-8 transition duration-500 ease-in-out transform shadow-xl overflow-clip rounded-xl sm:rounded-xl 
            md:hover:-translate-y-1 md:hover:shadow-2xl lg:border lg:border-gray-800 lg:hover:border-gray-700 lg:hover:bg-gray-800/50"
              >
                <img
                  alt={title}
                  class="h-full w-full transition duration-500 md:scale-110 md:hover:scale-105"
                  loading="eager"
                  src={image}
                />
              </div>
            )}
          </div>
          <div class="w-full md:w-1/2 md:max-w-lg md:flex md:flex-col">
            <h3
              class="text-2xl font-bold text-gray-800 dark:text-gray-100"
              data-i18n={`PROYECT${data}_TITLE`}
            >
              {title}
            </h3>
            <div class="flex flex-wrap mt-2">
              <ul class="flex flex-wrap mb-2 gap-x-2 gap-y-2">
                {tags.map((tag) => (
                  <li>
                    <span
                      class={`flex gap-x-2 rounded-full text-xs ${tag.class} py-1 px-2 `}
                    >
                      <tag.icon class="size-4" />
                      {tag.name}
                    </span>
                  </li>
                ))}
              </ul>

              <div
                class="mt-2 text-gray-700 dark:text-gray-400"
                data-i18n={`PROYECT${data}_DESCRIPTION`}
              >
                {description}
              </div>
              <footer class="flex items-end justify-start mt-2 gap-x-4 ">
                {github && (
                  <LinkButton href={github}>
                    <GitHub class="size-6" />
                    Code
                  </LinkButton>
                )}
                {link && (
                  <LinkButton href={link}>
                    <Link class="size-4" />
                    Preview
                  </LinkButton>
                )}
                {download && (
                  <LinkButton href={download}>
                    <Download class="size-4" />
                    Check it Out
                  </LinkButton>
                )}
              </footer>
            </div>
          </div>
        </article>
      )
    )
  }
</div>
